# APIé¡¹ç›®


## ç›®å½•ç»“æ„
```text
my-api-project/                              # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“‚ supabase/                             # Supabase é…ç½®ç›®å½•ï¼ˆä¸å¯æ›´æ”¹ï¼‰
â”‚   â”œâ”€â”€ ğŸ“‚ functions/                        # Edge Functions ç›®å½•
â”‚   â”‚   â””â”€â”€ ğŸ“‚ api/                          # ä¸» API å‡½æ•°ï¼ˆå‡½æ•°åå¯¹åº” URL è·¯å¾„ï¼‰
â”‚   â”‚       â””â”€â”€ index.ts                     # Supabase éƒ¨ç½²å…¥å£ï¼šhttps://[project].supabase.co/functions/v1/api
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ migrations/                       # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ 20240101000000_init.sql          # åˆå§‹åŒ–è¡¨ç»“æ„
â”‚   â”‚   â””â”€â”€ 20240115000000_add_products.sql  # æ·»åŠ äº§å“è¡¨
â”‚   â”‚
â”‚   â”œâ”€â”€ seed.sql                             # æ•°æ®åº“ç§å­æ•°æ®
â”‚   â””â”€â”€ config.toml                          # Supabase é¡¹ç›®é…ç½®
â”‚
â”œâ”€â”€ ğŸ“‚ src/                                  # æ ¸å¿ƒä¸šåŠ¡æºä»£ç 
â”‚   â”‚
â”‚   â”œâ”€â”€ app.ts                               # ğŸ¯ Hono åº”ç”¨ä¸»æ–‡ä»¶ï¼ˆæ³¨å†Œè·¯ç”±ã€ä¸­é—´ä»¶ã€é”™è¯¯å¤„ç†ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ routes/                           # è·¯ç”±å®šä¹‰ï¼ˆæŒ‰æ¨¡å—åˆ†ç»„ï¼ŒHono é£æ ¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ index.ts                         # è·¯ç”±èšåˆå¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ auth.routes.ts                   # è®¤è¯è·¯ç”±ï¼š/api/auth/*
â”‚   â”‚   â”œâ”€â”€ user.routes.ts                   # ç”¨æˆ·è·¯ç”±ï¼š/api/users/*
â”‚   â”‚   â””â”€â”€ product.routes.ts                # äº§å“è·¯ç”±ï¼š/api/products/*
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ handlers/                         # è·¯ç”±å¤„ç†å™¨ï¼ˆå¤„ç† HTTP è¯·æ±‚å“åº”ï¼‰
â”‚   â”‚   â”œâ”€â”€ auth.handler.ts                  # è®¤è¯å¤„ç†å™¨ï¼šregisterã€loginã€logout
â”‚   â”‚   â”œâ”€â”€ user.handler.ts                  # ç”¨æˆ·å¤„ç†å™¨ï¼šCRUD æ“ä½œ
â”‚   â”‚   â””â”€â”€ product.handler.ts               # äº§å“å¤„ç†å™¨ï¼šäº§å“ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ services/                         # ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆæ ¸å¿ƒä¸šåŠ¡è§„åˆ™ï¼‰
â”‚   â”‚   â”œâ”€â”€ auth.service.ts                  # è®¤è¯ä¸šåŠ¡é€»è¾‘ï¼šå¯†ç éªŒè¯ã€Token ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ user.service.ts                  # ç”¨æˆ·ä¸šåŠ¡é€»è¾‘ï¼šç”¨æˆ·ç®¡ç†ã€æƒé™æ£€æŸ¥
â”‚   â”‚   â””â”€â”€ product.service.ts               # äº§å“ä¸šåŠ¡é€»è¾‘ï¼šåº“å­˜ç®¡ç†ã€ä»·æ ¼è®¡ç®—
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ repositories/                     # æ•°æ®è®¿é—®å±‚ï¼ˆæ•°æ®åº“æ“ä½œå°è£…ï¼‰
â”‚   â”‚   â”œâ”€â”€ base.repository.ts               # é€šç”¨ CRUD åŸºç±»
â”‚   â”‚   â”œâ”€â”€ user.repository.ts               # ç”¨æˆ·æ•°æ®è®¿é—®ï¼šæŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°
â”‚   â”‚   â””â”€â”€ product.repository.ts            # äº§å“æ•°æ®è®¿é—®ï¼šåº“å­˜æŸ¥è¯¢ã€æ‰¹é‡æ“ä½œ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ schemas/                          # æ•°æ®éªŒè¯æ¨¡å¼ï¼ˆZod Schemaï¼‰
â”‚   â”‚   â”œâ”€â”€ auth.schema.ts                   # è®¤è¯æ•°æ®éªŒè¯ï¼šç™»å½•ã€æ³¨å†Œè¡¨å•
â”‚   â”‚   â”œâ”€â”€ user.schema.ts                   # ç”¨æˆ·æ•°æ®éªŒè¯ï¼šåˆ›å»ºã€æ›´æ–°è§„åˆ™
â”‚   â”‚   â”œâ”€â”€ product.schema.ts                # äº§å“æ•°æ®éªŒè¯ï¼šä»·æ ¼ã€åº“å­˜æ ¡éªŒ
â”‚   â”‚   â””â”€â”€ common.schema.ts                 # é€šç”¨éªŒè¯è§„åˆ™ï¼šåˆ†é¡µã€æ’åºå‚æ•°
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ middlewares/                      # Hono ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts               # JWT è®¤è¯ä¸­é—´ä»¶ï¼šToken éªŒè¯ã€ç”¨æˆ·æ³¨å…¥
â”‚   â”‚   â”œâ”€â”€ validator.middleware.ts          # è¯·æ±‚æ•°æ®éªŒè¯ï¼ˆZod é›†æˆï¼‰
â”‚   â”‚   â”œâ”€â”€ logger.middleware.ts             # è¯·æ±‚æ—¥å¿—è®°å½•ï¼šè®¿é—®æ—¥å¿—ã€é”™è¯¯æ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ rate-limit.middleware.ts         # API é™æµä¸­é—´ä»¶ï¼šé˜²æ­¢æ»¥ç”¨
â”‚   â”‚   â””â”€â”€ cors.middleware.ts               # CORS è·¨åŸŸé…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ lib/                              # å·¥å…·åº“å’Œå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ errors/                       # é”™è¯¯å¤„ç†ä½“ç³»
â”‚   â”‚   â”‚   â”œâ”€â”€ app-error.ts                 # è‡ªå®šä¹‰é”™è¯¯åŸºç±»ï¼šAppErrorã€ValidationError
â”‚   â”‚   â”‚   â”œâ”€â”€ error-codes.ts               # é”™è¯¯ç å¸¸é‡ï¼šä¸šåŠ¡é”™è¯¯ç å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ error-handler.ts             # å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ supabase.client.ts               # Supabase å®¢æˆ·ç«¯å•ä¾‹
â”‚   â”‚   â”œâ”€â”€ logger.ts                        # ç»“æ„åŒ–æ—¥å¿—å·¥å…·
â”‚   â”‚   â”œâ”€â”€ api-response.ts                  # ç»Ÿä¸€ API å“åº”æ ¼å¼å°è£…
â”‚   â”‚   â”œâ”€â”€ jwt.ts                           # JWT å·¥å…·ï¼šç”Ÿæˆã€éªŒè¯ã€åˆ·æ–°
â”‚   â”‚   â”œâ”€â”€ password.ts                      # å¯†ç å·¥å…·ï¼šåŠ å¯†ã€éªŒè¯
â”‚   â”‚   â””â”€â”€ constants.ts                     # å…¨å±€å¸¸é‡å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ types/                            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ user.types.ts                    # ç”¨æˆ·ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ product.types.ts                 # äº§å“ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ api.types.ts                     # API é€šç”¨ç±»å‹ï¼šå“åº”ã€åˆ†é¡µ
â”‚   â”‚   â””â”€â”€ hono.types.ts                    # Hono æ‰©å±•ç±»å‹ï¼šContext Variables
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ config/                           # åº”ç”¨é…ç½®ï¼ˆç¯å¢ƒå˜é‡ã€å¸¸é‡ï¼‰
â”‚       â”œâ”€â”€ app.config.ts                    # åº”ç”¨åŸºç¡€é…ç½®ï¼šç«¯å£ã€ç¯å¢ƒ
â”‚       â”œâ”€â”€ supabase.config.ts               # Supabase è¿æ¥é…ç½®
â”‚       â”œâ”€â”€ auth.config.ts                   # JWTã€å¯†é’¥ç­‰è®¤è¯é…ç½®
â”‚       â””â”€â”€ index.ts                         # ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰é…ç½®
â”‚
â”œâ”€â”€ ğŸ“‚ tests/                                # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ unit/                             # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/                     # Service å±‚æµ‹è¯•
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ user.service.test.ts
â”‚   â”‚   â””â”€â”€ ğŸ“‚ repositories/                 # Repository å±‚æµ‹è¯•
â”‚   â”‚       â””â”€â”€ user.repository.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ integration/                      # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ ğŸ“‚ api/                          # API ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”‚       â”œâ”€â”€ auth.test.ts                 # è®¤è¯æµç¨‹æµ‹è¯•
â”‚   â”‚       â””â”€â”€ user.test.ts                 # ç”¨æˆ· API æµ‹è¯•
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ fixtures/                         # æµ‹è¯•æ•°æ®
â”‚   â”‚   â”œâ”€â”€ users.fixture.ts                 # ç”¨æˆ·æµ‹è¯•æ•°æ®
â”‚   â”‚   â””â”€â”€ products.fixture.ts              # äº§å“æµ‹è¯•æ•°æ®
â”‚   â”‚
â”‚   â””â”€â”€ setup.ts                             # æµ‹è¯•ç¯å¢ƒé…ç½®ï¼šæ•°æ®åº“åˆå§‹åŒ–ã€æ¸…ç†
â”‚
â”œâ”€â”€ ğŸ“‚ scripts/                              # è¿ç»´å’Œéƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy.ts                            # ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼šæµ‹è¯• â†’ æ„å»º â†’ éƒ¨ç½²
â”‚   â”œâ”€â”€ seed-db.ts                           # æ•°æ®åº“ç§å­æ•°æ®è„šæœ¬
â”‚   â”œâ”€â”€ generate-types.ts                    # ä» Supabase ç”Ÿæˆ TypeScript ç±»å‹
â”‚   â”œâ”€â”€ test-local.ts                        # æœ¬åœ°ç¯å¢ƒæµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ migrate.ts                           # æ•°æ®åº“è¿ç§»ç®¡ç†è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                                 # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“‚ api/                              # API æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ openapi.yaml                     # OpenAPI 3.0 è§„èŒƒæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ endpoints.md                     # æ¥å£è¯´æ˜æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ architecture.md                      # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ development.md                       # å¼€å‘æŒ‡å—ï¼šç¯å¢ƒæ­å»ºã€è§„èŒƒ
â”‚   â”œâ”€â”€ deployment.md                        # éƒ¨ç½²æŒ‡å—ï¼šç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ database.md                          # æ•°æ®åº“è®¾è®¡æ–‡æ¡£
â”‚
â”œâ”€â”€ index.ts                                 # ğŸš€ é¡¹ç›®æ ¹å…¥å£ï¼ˆæœ¬åœ°å¼€å‘å¯åŠ¨ï¼Œè°ƒç”¨ src/app.tsï¼‰
â”‚
â”œâ”€â”€ deno.json                                # Deno é¡¹ç›®é…ç½®æ–‡ä»¶
â”‚                                            # - tasks: å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ä»»åŠ¡
â”‚                                            # - imports: è·¯å¾„åˆ«åæ˜ å°„
â”‚                                            # - compilerOptions: TypeScript ç¼–è¯‘é€‰é¡¹
â”‚
â”œâ”€â”€ import_map.json                          # ä¾èµ–åˆ«åæ˜ å°„ï¼ˆå¯é€‰ï¼Œç®€åŒ–å¯¼å…¥è·¯å¾„ï¼‰
â”œâ”€â”€ deno.lock                                # ä¾èµ–é”å®šæ–‡ä»¶ï¼ˆç¡®ä¿ç‰ˆæœ¬ä¸€è‡´æ€§ï¼‰
â”‚
â”œâ”€â”€ .env.example                             # ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶ï¼ˆä¸å«çœŸå®å¯†é’¥ï¼‰
â”œâ”€â”€ .env.local                               # æœ¬åœ°å¼€å‘ç¯å¢ƒå˜é‡ï¼ˆGit å¿½ç•¥ï¼‰
â”œâ”€â”€ .env.production                          # ç”Ÿäº§ç¯å¢ƒå˜é‡ï¼ˆGit å¿½ç•¥ï¼‰
â”‚
â”œâ”€â”€ .gitignore                               # Git å¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ .editorconfig                            # ç¼–è¾‘å™¨é…ç½®ï¼ˆä»£ç é£æ ¼ç»Ÿä¸€ï¼‰
â”‚
â”œâ”€â”€ README.md                                # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”‚                                            # - é¡¹ç›®ä»‹ç»
â”‚                                            # - å¿«é€Ÿå¼€å§‹
â”‚                                            # - æŠ€æœ¯æ ˆ
â”‚                                            # - ç›®å½•ç»“æ„è¯´æ˜
â”‚
â””â”€â”€ LICENSE                                  # å¼€æºåè®®ï¼ˆå¯é€‰ï¼‰
```


## ğŸ¯ æ ¸å¿ƒåˆ†å±‚é€»è¾‘

```txt
è¯·æ±‚æµç¨‹ï¼š
routes (è·¯ç”±å®šä¹‰)
  â†“
handlers (å¤„ç† HTTP è¯·æ±‚/å“åº”)
  â†“
services (ä¸šåŠ¡é€»è¾‘)
  â†“
repositories (æ•°æ®è®¿é—®)
  â†“
Supabase æ•°æ®åº“
```


## åˆå§‹åŒ–é¡¹ç›®

1. git clone https://github.com/zzzeee/full-stack-base.git
2. å®‰è£…dockerå¹¶å¯åŠ¨: ğŸ‘‰ https://www.docker.com
3. å®‰è£…Supabase CLI
  - npm install -g supabase
  - brew install supabase/tap/supabase
4. åˆå§‹åŒ–Supabase
  - cd api
  - [npx] supabase init
  - [npx] supabase start

