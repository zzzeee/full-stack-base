# .env.example
# 环境变量示例文件（不包含真实密钥）
# 使用方法：复制为 .env.local 并填入真实值
# cp .env.example .env.local

# ==================== 应用配置 ====================
# 运行环境：development | staging | production
ENVIRONMENT=development

# 服务器端口
PORT=8000

# 应用名称
APP_NAME=My API Project

# API 版本
API_VERSION=v1

# 应用 URL（生产环境使用）
APP_URL=http://localhost:8000

# ==================== Supabase 配置 ====================
# Supabase 项目 URL
# 获取方式：Supabase Dashboard → Settings → API → Project URL
SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anon Key（公开密钥，客户端使用）
# 获取方式：Supabase Dashboard → Settings → API → Project API keys → anon public
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase Service Role Key（服务端密钥，仅服务器使用，绕过 RLS）
# ⚠️ 警告：此密钥拥有完全权限，不要泄露或提交到代码仓库
# 获取方式：Supabase Dashboard → Settings → API → Project API keys → service_role secret
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase JWT Secret（用于验证 JWT Token）
# 获取方式：Supabase Dashboard → Settings → API → JWT Settings → JWT Secret
SUPABASE_JWT_SECRET=your-super-secret-jwt-secret-with-at-least-32-characters

# ==================== JWT 认证配置 ====================
# JWT 密钥（用于生成自定义 Token）
# 生成方法：openssl rand -base64 32
JWT_SECRET=your-jwt-secret-key-min-32-chars-recommended-64

# JWT Token 过期时间（秒）
JWT_EXPIRES_IN=604800                # 7 天 = 7 * 24 * 60 * 60
JWT_REFRESH_EXPIRES_IN=2592000       # 30 天

# ==================== 数据库配置 ====================
# 数据库连接字符串（如果直接连接 Postgres）
# 格式：postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres

# 数据库连接池配置
DB_POOL_MIN=2
DB_POOL_MAX=10

# ==================== 日志配置 ====================
# 日志级别：debug | info | warn | error
LOG_LEVEL=info

# 日志格式：json | pretty
LOG_FORMAT=pretty

# 是否启用日志文件输出
LOG_FILE_ENABLED=false
LOG_FILE_PATH=./logs/app.log

# ==================== CORS 配置 ====================
# 允许的跨域来源（逗号分隔）
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# 是否允许携带凭证（Cookies）
CORS_CREDENTIALS=true

# ==================== 限流配置 ====================
# API 限流：每小时最大请求数
RATE_LIMIT_MAX=100

# 限流时间窗口（毫秒）
RATE_LIMIT_WINDOW=3600000            # 1 小时

# ==================== 邮件服务配置（可选）====================
# SMTP 服务器
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false                    # true for 465, false for other ports
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# 发件人信息
MAIL_FROM_NAME=My API Project
MAIL_FROM_EMAIL=noreply@example.com

# ==================== 第三方服务（可选）====================
# AWS S3（文件存储）
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_S3_BUCKET=your-bucket-name

# Redis（缓存）
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# Sentry（错误监控）
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development

# Stripe（支付）
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# ==================== 功能开关 ====================
# 是否启用 API 文档
ENABLE_API_DOCS=true

# 是否启用请求日志
ENABLE_REQUEST_LOGGING=true

# 是否启用详细错误信息（生产环境应设为 false）
ENABLE_DETAILED_ERRORS=true

# ==================== 安全配置 ====================
# 密码加密的 Bcrypt 轮数（10-12 推荐）
BCRYPT_ROUNDS=10

# Session 密钥
SESSION_SECRET=your-session-secret-key-min-32-chars

# CSRF Token 密钥
CSRF_SECRET=your-csrf-secret-key

# ==================== 开发工具 ====================
# 是否启用热重载
HOT_RELOAD=true

# 是否启用 API 调试模式
DEBUG_MODE=false

# ==================== 注意事项 ====================
# 1. 生产环境必须使用强密码和随机密钥
# 2. 所有密钥至少 32 字符
# 3. 生产环境禁用 DEBUG_MODE 和 ENABLE_DETAILED_ERRORS
# 4. SUPABASE_SERVICE_ROLE_KEY 只能在服务端使用
# 5. 定期轮换密钥和 Token